import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./iframe-j35EKpAQ.js";import"./preload-helper-PPVm8Dsz.js";const o=function(d){const{offset:c=0,children:m,width:u,height:f,className:y,style:v,placeholder:j,onContentVisible:a}=d,[H,b]=t.useState(!1),x=t.useRef(a);x.current=a;const n=t.useRef(null),s=t.useRef(null),L=j||e.jsx("div",{children:"loading..."}),g=t.useCallback(()=>{const i=n.current;i&&i instanceof HTMLElement&&s.current&&(s.current.unobserve(i),s.current.disconnect())},[]),w=t.useCallback(i=>{const[C]=i,{isIntersecting:E}=C;E&&(b(!0),x.current?.(),g())},[]);return t.useLayoutEffect(()=>{if(n.current&&n.current instanceof HTMLElement){const i=typeof c=="number"?c+"px":c||"0px";return s.current=new IntersectionObserver(w,{rootMargin:i,threshold:0}),s.current.observe(n.current),g}},[]),e.jsx("div",{className:y,style:{width:u,height:f,...v},ref:n,children:H?m:L})};o.__docgenInfo={description:"",methods:[],displayName:"LazyLoad",props:{offset:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},width:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},height:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},placeholder:{required:!1,tsType:{name:"ReactNode"},description:""},onContentVisible:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const P={title:"Components/懒加载组件",component:o,tags:["autodocs"],argTypes:{offset:{description:"距离视口多少距离开始加载"}}},p=d=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"}),e.jsx(o,{...d}),e.jsx("div",{style:{height:"40px",lineHeight:"40px"},children:"占位"})]}),r={args:{offset:"100px",children:e.jsx("img",{src:"https://img1.baidu.com/it/u=2172818577,3783888802&fm=253&app=138&f=JPEG?w=800&h=1422"})},render:p},l={args:{offset:"100px",placeholder:e.jsx("div",{style:{height:"100px"},children:"loading...."}),children:e.jsx("img",{src:"https://img1.baidu.com/it/u=2172818577,3783888802&fm=253&app=138&f=JPEG?w=800&h=1422"})},render:p},h={args:{offset:"100px",placeholder:e.jsx("div",{style:{height:"100px"},children:"loading...."}),children:e.jsx("img",{src:"https://img1.baidu.com/it/u=2172818577,3783888802&fm=253&app=138&f=JPEG?w=800&h=1422"}),onContentVisible:()=>{alert("已经出现在视口内")}},render:p};r.parameters={...r.parameters,docs:{...r.parameters?.docs,source:{originalSource:`{
  args: {
    offset: "100px",
    children: <img src="https://img1.baidu.com/it/u=2172818577,3783888802&fm=253&app=138&f=JPEG?w=800&h=1422" />
  },
  render: renderLazyLoad
}`,...r.parameters?.docs?.source}}};l.parameters={...l.parameters,docs:{...l.parameters?.docs,source:{originalSource:`{
  args: {
    offset: "100px",
    placeholder: <div style={{
      height: "100px"
    }}>loading....</div>,
    children: <img src="https://img1.baidu.com/it/u=2172818577,3783888802&fm=253&app=138&f=JPEG?w=800&h=1422" />
  },
  render: renderLazyLoad
}`,...l.parameters?.docs?.source}}};h.parameters={...h.parameters,docs:{...h.parameters?.docs,source:{originalSource:`{
  args: {
    offset: "100px",
    placeholder: <div style={{
      height: "100px"
    }}>loading....</div>,
    children: <img src="https://img1.baidu.com/it/u=2172818577,3783888802&fm=253&app=138&f=JPEG?w=800&h=1422" />,
    onContentVisible: () => {
      alert("已经出现在视口内");
    }
  },
  render: renderLazyLoad
}`,...h.parameters?.docs?.source}}};const V=["offset","placeholder","onContentVisible"];export{V as __namedExportsOrder,P as default,r as offset,h as onContentVisible,l as placeholder};
